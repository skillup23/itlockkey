---
title: 'Установка и использование Nextcloud в Ubuntu'
author: 'Роберт'
publishDate: '19.11.24'
group: 'nextcloud'
---

# Установка и использование Nextcloud в Ubuntu 20.04

Чтобы выполнить перечисленные в настоящем руководстве шаги, вам потребуется следующее:

- Пользователь с правами **sudo** без привилегий **root** и настроенный брандмауэр на сервере.
  <Link href={`/blog/ubuntu-server-setup`} className="text-red-600">
    Базовая настройка Ubuntu
  </Link>
- Доменное имя, указывающее на ваш сервер через **A** запись

---

### Шаг 1 – Установка Nextcloud

Мы выполним установку Nextcloud с помощью системы пакетов Snap.
Эта система пакетов доступна в Ubuntu 20.04 по умолчанию.
Она позволяет организациям поставлять программное обеспечение со всеми зависимостями и конфигурациями в самодостаточном блоке с автоматическими обновлениями.
Это означает, что вместо установки и настройки веб-сервера и сервера базы данных и настройки приложения Nextcloud для работы с ними мы можем установить пакет snap, который автоматически настроит все системы.

Чтобы загрузить пакет Nextcloud snap и установить его в системе, введите:

```bash
sudo snap install nextcloud
```

Пакет Nextcloud будет загружен и установлен на ваш сервер.
Вы можете проверить успешность установки посредством вывода изменений, связанных с пакетом snap:

```bash
snap changes nextcloud
```

Вывод

```bash
ID   Status  Spawn               Ready               Summary
4    Done    today at 16:12 UTC  today at 16:12 UTC  Install "nextcloud" snap
```

### Шаг 2 – Настройка учетной записи администратора

Существует несколько разных способов, которыми вы можете настроить Nextcloud snap. В этом руководстве мы не будем рассматривать создание пользователя с правами администратора через веб-интерфейс.
Вместо этого мы создадим такого пользователя через командную строку, чтобы избежать появления небольшого окна, в котором страница регистрации администратора будет доступна любому посетителю IP-адреса или домена вашего сервера.

Чтобы настроить Nextcloud с новой учетной записью администратора, используйте команду **nextcloud.manual-install**.
В качестве аргументов следует задать имя пользователя и пароль:

```bash
sudo nextcloud.manual-install user password
```

Следующее сообщение указывает, что настройка Nextcloud выполнена правильно:

```bash
Nextcloud was successfully installed
```

После установки Nextcloud нам необходимо настроить доверенные домены, чтобы Nextcloud реагировал на запросы с использованием доменного имени или IP-адреса сервера.

### Шаг 3 – Настройка доверенных доменов

При установке из командной строки Nextcloud ограничивает имена хостов, на которые будет реагировать устанавливаемый экземпляр.
По умолчанию служба отвечает только на запросы, обращенные к хосту с именем localhost.
Для доступа к Nextcloud мы будем использовать доменное имя сервера или IP-адрес, и поэтому нам нужно изменить эту настройку, чтобы можно было применять запросы этого типа.

Вы можете просмотреть текущие настройки, запросив значение массива trusted_domains:

```bash
sudo nextcloud.occ config:system:get trusted_domains
```

Вывод

```bash
localhost
```

В настоящее время в массиве содержится только первое значение localhost.
Мы можем добавить запись для доменного имени или IP-адреса нашего сервера, введя следующее, где **example.com** - имя домена:

```bash
sudo nextcloud.occ config:system:set trusted_domains 1 --value=example.com
```

Если мы снова запросим значение trusted domains, мы увидим уже две записи:

```bash
localhost
example.com
```

Ссылка на внешний ресурс [https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-nextcloud-on-ubuntu-20-04-ru](https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-nextcloud-on-ubuntu-20-04-ru)

Конфиг для внесения изменений
/var/snap/nextcloud/30258/nextcloud/config

Инструкция по добавлению места на диске в ubuntu
[https://unixhow.com/6781/izmenit-razmer-kornevogo-razdela-ubuntu-pomoshhyu-razdela](https://unixhow.com/6781/izmenit-razmer-kornevogo-razdela-ubuntu-pomoshhyu-razdela)
